{% extends "base.html" %}
{% set pagetype = "status" %}
{% set MainNav = "status" %}
{% set title = "Status" %}

{% block content %}
  <h2 class="text-2xl font-bold mb-4">System Status</h2>

  <!-- Progress Bar -->
  <div id="progbarbg" class="relative w-full bg-gray-200 h-4 rounded mb-4 statusbar">
      <!-- The progress fill; width will be controlled via JavaScript -->
      <div id="cycle_status"
           class="absolute left-0 top-0 h-4 bg-green-500 rounded text-center statusbar"
           role="progressbar"
           aria-valuenow="0"
           aria-valuemin="0"
           aria-valuemax="100">
      </div>
      <!-- Optional overlay for additional status text -->
      <div id="cycle_status_overlay" class="absolute inset-0 flex items-center justify-center font-bold statusbar-content"></div>
      <div id="cycle_status_overlay_exact" class="absolute inset-0 flex items-center justify-center font-bold statusbar-content">
          <span id="scans_this_cycle"></span>
          <span class="px-2">/</span>
          <span id="effective_scope_size"></span>
      </div>
  </div>

  <!-- First Row Cards -->
  <div class="flex flex-wrap -mx-2 mb-4">
    <!-- Natlas Start Time Card -->
    <div class="w-full sm:w-1/3 px-2 mb-4">
      <div class="bg-white shadow rounded text-center">
        <div class="p-4">
          <h3 class="text-lg font-semibold mb-2">Natlas Start Time</h3>
          <div class="text-base" id="natlas_start_time"></div>
        </div>
      </div>
    </div>
    <!-- Cycle Start Time Card -->
    <div class="w-full sm:w-1/3 px-2 mb-4">
      <div class="bg-white shadow rounded text-center">
        <div class="p-4">
          <h3 class="text-lg font-semibold mb-2">Cycle Start Time</h3>
          <div class="text-base" id="cycle_start_time"></div>
        </div>
      </div>
    </div>
    <!-- Completed Cycles Card -->
    <div class="w-full sm:w-1/3 px-2 mb-4">
      <div class="bg-white shadow rounded text-center">
        <div class="p-4">
          <h3 class="text-lg font-semibold mb-2">Completed Cycles</h3>
          <div class="text-base" id="completed_cycles"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Second Row Card -->
  <div class="flex flex-wrap -mx-2">
    <div class="w-full sm:w-1/3 px-2 mb-4">
      <div class="bg-white shadow rounded text-center">
        <div class="p-4">
          <h3 class="text-lg font-semibold mb-2">Average Cycle Duration</h3>
          <div class="text-base" id="avg_cycle_duration"></div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
