<div x-data="{ open: false }" class="relative inline-block text-left">
  <!-- Dropdown Toggle Button -->
  <button type="button"
          @click="open = !open"
          :aria-expanded="open"
          class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 focus:outline-none"
          aria-haspopup="true">
    <i class="fas fa-ellipsis-v"></i>
  </button>

  <!-- Dropdown Menu (opens to the left, overlaying table contents) -->
  <div x-show="open" @click.away="open = false" x-transition
       class="origin-top-right absolute right-0 top-0 mt-0 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10">
    <div class="py-1">
      <!-- Refresh Token Form -->
      <form method="POST" action="{{ url_for('user.generate_new_token', agent_id=agent.agentid) }}">
        {{ generateTokenForm.hidden_tag() }}
        <button type="submit"
                name="generateToken"
                title="Refresh Token"
                onclick="return confirm('Are you sure you want to generate a new token for {{ agent.agentid }}? This will invalidate any existing agents using this token.')"
                class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
          <i class="fas fa-sync-alt text-blue-500 mr-1"></i>Refresh Token
        </button>
      </form>
    </div>
  </div>
</div>
