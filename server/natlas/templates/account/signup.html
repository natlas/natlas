{% extends "account/base_entrance.html" %}
{% load allauth i18n widget_tweaks %}

{% block head_title %}{% trans "Signup" %}{% endblock head_title %}

{% block unauthenticated_content %}
  <!-- Signup Form Container -->
  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-md">
    <div class="bg-white px-6 py-12 shadow sm:rounded-lg sm:px-12">

      <!-- Login Link -->
      <p class="text-center text-sm text-gray-500">
        {% blocktranslate %}Already have an account? Then please <a href="{{ login_url }}" class="font-semibold text-indigo-600 hover:text-indigo-500">sign in</a>.{% endblocktranslate %}
      </p>

      {% if not SOCIALACCOUNT_ONLY %}
        {% url 'account_signup' as action_url %}
        {% element form form=form method="post" action=action_url tags="entrance,signup" class="space-y-6" %}
          {% slot body %}
            {% csrf_token %}

            <!-- Name Field (if present in form) -->
            {% if form.username %}
              <div>
                <label for="id_username" class="block text-sm font-medium text-gray-900">{% trans "Username" %}</label>
                <div class="mt-2">
                  {{ form.username|add_class:"block w-full rounded-md border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-400 focus:outline-indigo-600 sm:text-sm" }}
                </div>
              </div>
            {% endif %}

            <!-- Email Field -->
            <div>
              <label for="id_email" class="block text-sm font-medium text-gray-900">{% trans "Email address" %}</label>
              <div class="mt-2">
                {{ form.email|add_class:"block w-full rounded-md border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-400 focus:outline-indigo-600 sm:text-sm" }}
              </div>
            </div>

            <!-- Password Field -->
            <div>
              <label for="id_password1" class="block text-sm font-medium text-gray-900">{% trans "Password" %}</label>
              <div class="mt-2">
                {{ form.password1|add_class:"block w-full rounded-md border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-400 focus:outline-indigo-600 sm:text-sm" }}
              </div>
            </div>

            <!-- Confirm Password Field -->
            <div>
              <label for="id_password2" class="block text-sm font-medium text-gray-900">{% trans "Confirm Password" %}</label>
              <div class="mt-2">
                {{ form.password2|add_class:"block w-full rounded-md border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-400 focus:outline-indigo-600 sm:text-sm" }}
              </div>
            </div>

            {{ redirect_field }}
          {% endslot %}

          {% slot actions %}
            <button type="submit" class="w-full rounded-md bg-indigo-600 px-3 py-1.5 text-white font-semibold hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600 sm:text-sm">
              {% trans "Sign Up" %}
            </button>
          {% endslot %}
        {% endelement %}
      {% endif %}

      <!-- Passkey Signup -->
      {% if PASSKEY_SIGNUP_ENABLED %}
        <div class="relative mt-10">
          <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-200"></div>
          </div>
          <div class="relative flex justify-center text-sm font-medium">
            <span class="bg-white px-6 text-gray-900">Or continue with</span>
          </div>
        </div>

        <div class="mt-6">
          <a href="{{ signup_by_passkey_url }}" class="w-full rounded-md bg-white px-3 py-2 text-gray-900 font-semibold border border-gray-300 shadow hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600">
            {% trans "Sign up using a passkey" %}
          </a>
        </div>
      {% endif %}

      <!-- Social Signups -->
      {% if SOCIALACCOUNT_ENABLED %}
        {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
      {% endif %}
{% endblock unauthenticated_content %}
